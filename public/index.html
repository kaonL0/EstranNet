<!DOCTYPE html>
<html>
<head>
	<title>Estr@nNet</title>
	<meta charset="utf-8">
	<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
	<META HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE">	
	
	<!-- <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=1" /> -->
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

	<link rel="stylesheet" type="text/css" href="css/style.css">

	<script type="text/javascript" src="data/rules_default.js"></script>
	<script type="text/javascript" src="data/rules_ground_swamp.js"></script>
	<script type="text/javascript" src="data/determination_keys.js"></script>
</head>
<body>

	<div id="index">
		<div id="logo">
			<img src="logo/logo.png">
			<span style="font-weight: bold; color: #33272b;">Un outils pédagogique permettant d'identifier les espèces de notre territoire.</span>
		</div>

		<div id="select"></div>
		<div id="link" class="button"></div>

	</div>

	<script type="text/javascript">
		function createSelectDetermination() {

			let s = document.createElement('select');
			s.id = 'determination_key';
			s.classList.add('minimal');

			console.log('determination_keys', determination_keys);		
			for (var property in determination_keys) {
			    if (determination_keys.hasOwnProperty(property)) {
					option = document.createElement("option");
				    option.value = property;
				    option.text = determination_keys[property].name;
				    console.log('opt', option.value, option.text);
				    s.appendChild(option);
			    }
			}
			return s;
		}

		let link = document.createElement('a');
		link.id = 'alink';
		link.href = 'search.html';
		link.innerHTML = 'Rechercher une espèce';
		link.addEventListener('click', evt => {
			//evt.preventDefault();
			//evt.stopPropagation();

			let select = document.getElementById('determination_key');
			console.log('select', select.value);
			let newHref = 'search.html?determination_key=' + select.value;
			console.log(newHref);
			document.getElementById('alink').href = newHref
		});
		let divLink = document.getElementById('link');
		divLink.append(link);
		
		let select = createSelectDetermination();
		let divSelect = document.getElementById('select');
		divSelect.append(select);
	</script>

</body>
</html>